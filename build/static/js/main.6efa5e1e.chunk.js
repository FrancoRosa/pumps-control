(this["webpackJsonppumps-control"]=this["webpackJsonppumps-control"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(60),l=n.n(a),i=n(16),r=(n(69),n(70),n(3)),o=n(32),u=n(61),d=n(0),j=function(e){var t=e.name,n=e.icon,c=Object(r.g)().pathname.includes(t.toLowerCase());return Object(d.jsx)("li",{className:c?"is-active":"",children:Object(d.jsxs)(i.b,{to:"/".concat(t.toLowerCase()),children:[Object(d.jsx)("span",{className:"icon is-small",children:Object(d.jsx)(u.a,{icon:n})}),Object(d.jsx)("span",{children:t})]})})},m=function(){return Object(d.jsx)("div",{className:"tabs is-centered is-large",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)(j,{name:"Home",icon:o.a}),Object(d.jsx)(j,{name:"Config",icon:o.b})]})})},h=n(35),p=n(64),b=n(21),O=n.n(b),x=n(33),f=n(34),v=n.n(f),N="localhost",g=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,c,s,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... starting pump"),n=t.id,c=t.pulses,s=t.timeout,a="http://".concat(N,":9999/api/start"),e.next=5,v.a.post(a,{id:n,pulses:c,timeout:s});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.pump,n=e.handleClick,c=t.name,s=t.on,a=t.pulses_count,l=t.time_count;return Object(d.jsx)("div",{className:"column",children:Object(d.jsxs)("div",{className:"card m-4 p-4",children:[Object(d.jsx)("header",{className:"card-header",children:Object(d.jsx)("p",{className:"card-header-title title is-3 is-centered",children:c})}),Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsxs)("p",{children:["Current status: "," ",Object(d.jsx)("span",{className:"content ".concat(s?"has-text-danger":"has-text-success"),children:s?"Active":"Off"})]}),Object(d.jsxs)("p",{children:["Volume send: ",a]}),0==l?"":Object(d.jsxs)("p",{children:["Time elapsed: ",l.toFixed(1)," s"]})]}),Object(d.jsx)("footer",{className:"card-footer",children:Object(d.jsx)("button",{className:"button is-large is-outlined card-footer-item ".concat(s&&"is-loading"),onClick:n,children:"Start"})})]})})},P=n(63),_=n.n(P).a.connect("http://localhost:9999"),k=function(){var e=[{id:0,name:"Pump 1",on:!1,timeout:5,pulses:10,pulses_count:0,time_count:0},{id:1,name:"Pump 2",on:!1,timeout:5,pulses:10,pulses_count:0,time_count:0},{id:2,name:"Pump 3",on:!1,timeout:5,pulses:10,pulses_count:0,time_count:0},{id:3,name:"Pump 4",on:!1,timeout:5,pulses:10,pulses_count:0,time_count:0}],t=Object(c.useState)(e),n=Object(p.a)(t,2),s=n[0],a=n[1];Object(c.useEffect)((function(){_.on("message",(function(t){return function(t){var n=JSON.parse(t),c=n.id;n=Object(h.a)(Object(h.a)({},e[c]),n),e[c]=n,console.log(n),a(e)}(t)}))}),[]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{className:"title is-2 has-text-centered",children:"DECON SEVEN"}),Object(d.jsx)("div",{className:"columns",children:s.map((function(e){return Object(d.jsx)(C,{pump:e,handleClick:function(){return function(e){g(e).then((function(e){return console.log(e)}))}(e)}},e.id)}))})]})},w=function(e){var t=e.label,n=e.value,c=e.placeholder,s=e.handleChange;return Object(d.jsxs)("div",{className:"field",children:[Object(d.jsx)("label",{className:"label",children:t}),Object(d.jsx)("div",{className:"control",children:Object(d.jsx)("input",{className:"input",type:"number",min:"0",placeholder:c,onChange:s,value:n})})]})},V=function(e){var t=e.pump,n=e.handleChange,c=t.name,s=t.timeout,a=(t.value,t.volume),l=t.volPerPulse;return Object(d.jsx)("div",{className:"column",children:Object(d.jsxs)("div",{className:"card m-4 p-4",children:[Object(d.jsx)("header",{className:"card-header",children:Object(d.jsx)("p",{className:"card-header-title title is-3 is-centered",children:c})}),Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsx)(w,{label:"Timeout",value:s,placeholder:"Time in seconds",handleChange:n}),Object(d.jsx)(w,{label:"Volume",value:a,placeholder:"Volume in fl oz",handleChange:n}),Object(d.jsx)(w,{label:"Volume per Pulse",value:l,placeholder:"Volume in fl oz",handleChange:n})]})]})})},E=function(){return Object(d.jsx)("div",{className:"columns",children:[{id:1,name:"Pump 1",on:!1},{id:2,name:"Pump 2",on:!1},{id:3,name:"Pump 3",on:!1},{id:4,name:"Pump 4",on:!0}].map((function(e){return Object(d.jsx)(V,{pump:e},e.id)}))})},S=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{}),Object(d.jsxs)(r.d,{children:[Object(d.jsx)(r.a,{exact:!0,from:"/",to:"/home"}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(r.b,{path:"/home",component:k}),Object(d.jsx)(r.b,{path:"/config",component:E})]})]})]})};l.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(S,{})})}),document.getElementById("root"))},69:function(e,t,n){},70:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.6efa5e1e.chunk.js.map